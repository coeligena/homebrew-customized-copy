cask :v1 => 'git-annex' do
  version :latest
  sha256 :no_check

<<<<<<< HEAD
  if MacOS.version < :mountainlion
    url 'http://downloads.kitenet.net/git-annex/OSX/current/10.7.5_Lion/git-annex.dmg'
  elsif MacOS.version < :mavericks
    url 'http://downloads.kitenet.net/git-annex/OSX/current/10.8.2_Mountain_Lion/git-annex.dmg.bz2'
=======
  if MacOS.release <= :lion
    url 'https://downloads.kitenet.net/git-annex/OSX/current/10.7.5_Lion/git-annex.dmg'
  elsif MacOS.release == :mountain_lion
    url 'https://downloads.kitenet.net/git-annex/OSX/current/10.8.2_Mountain_Lion/git-annex.dmg.bz2'
>>>>>>> caskroom/homebrew-cask/master

    # This is a horrible hack to force the file extension.  The
    # backend code should be fixed so that this is not needed.
    preflight do
      system '/bin/mv', '--', staged_path.join('git-annex-latest'), destination_path.join('git-annex-latest.dmg')
    end
    container :nested => 'git-annex-latest.dmg'
<<<<<<< HEAD
  elsif MacOS.version < :yosemite
    url 'http://downloads.kitenet.net/git-annex/OSX/current/10.9_Mavericks/git-annex.dmg'
  else
    url 'http://downloads.kitenet.net/git-annex/OSX/current/10.10_Yosemite/git-annex.dmg'
=======
  elsif MacOS.release == :mavericks
    url 'https://downloads.kitenet.net/git-annex/OSX/current/10.9_Mavericks/git-annex.dmg'
  else
    url 'https://downloads.kitenet.net/git-annex/OSX/current/10.10_Yosemite/git-annex.dmg'
>>>>>>> caskroom/homebrew-cask/master
  end

  gpg "#{url}.sig",
      :key_url => 'https://downloads.kitenet.net/git-annex/gpg-pubkey.asc'
  homepage 'http://git-annex.branchable.com/'
<<<<<<< HEAD
  license :oss
=======
  license :unknown    # todo: change license and remove this comment; ':unknown' is a machine-generated placeholder
>>>>>>> caskroom/homebrew-cask/master

  app 'git-annex.app'
  binary 'git-annex.app/Contents/MacOS/git-annex'
  binary 'git-annex.app/Contents/MacOS/git-annex-shell'

  uninstall :launchctl => 'com.branchable.git-annex.assistant'

  depends_on :macos => %w{
                          :lion
                          :mountain_lion
                          :mavericks
                          :yosemite
                         }

  caveats do
    files_in_usr_local
  end
end
